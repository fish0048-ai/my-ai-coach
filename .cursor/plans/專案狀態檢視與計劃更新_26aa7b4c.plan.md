---
name: 專案狀態檢視與計劃更新
overview: 基於實際程式碼檢視結果，更新計劃文件以反映已完成功能、重新評估優先級，並將 AI 功能增強列為優先項目。
todos: []
---

# 專案狀態檢視與計劃更新

## 一、已完成功能確認

### 1.1 資料分析增強

#### ✅ PR (Personal Record) 追蹤 - 已完成

- **實現位置**: 
- `src/services/calendarService.js` - `extractPRs()`, `getAllPRs()`
- `src/components/Dashboard/PRTracker.jsx`
- `src/views/DashboardView.jsx` - 已整合顯示
- **功能**: 自動識別力量訓練和跑步的 PR，支援 1RM、總訓練量、最大重量、最大距離、最快配速等

#### ✅ 訓練周期分析 - 已完成

- **實現位置**: 
- `src/utils/cycleAnalysis.js` - 完整的周期分析邏輯
- `src/views/TrendAnalysisView.jsx` - 已整合顯示
- **功能**: 分析增肌期、減脂期、維持期、恢復期，提供趨勢分析和建議

### 1.2 社交與分享功能

#### ✅ 訓練成就系統 - 已完成

- **實現位置**: 
- `src/services/achievementService.js` - 13種成就類型
- `src/components/Dashboard/AchievementBadge.jsx`
- `src/components/Dashboard/AchievementPanel.jsx`
- `src/views/DashboardView.jsx` - 已整合顯示
- `src/views/CalendarView.jsx` - 訓練完成時自動檢查
- **功能**: 連續訓練、總訓練次數、跑步、力量訓練、特殊成就等

### 1.3 AI 功能增強

#### ✅ 訓練計劃推薦 - 已完成並擴展

- **實現位置**: 
- `src/services/ai/workoutGenerator.js` - `generateTrainingPlan()`, `PLAN_TYPES`
- `src/views/TrainingPlanView.jsx`
- `src/views/CalendarView.jsx` - 已整合入口
- **功能**: 
- 10種訓練計劃類型（5x5, PPL, 上下半身, 全身, 跑步新手, 5K, 半馬完賽, 全馬完賽, 半馬破PB, 全馬破PB）
- 支援目標 PB 和賽事日期設定
- 可直接應用到行事曆
- 精簡 prompt 以加速生成
- 結構化課表輸出（非文字說明）

## 二、部分實現功能

### 2.1 營養分析（基礎版已實現）

**當前狀態**:

- ✅ 圖片識別營養成分（`NutritionView.jsx` - `handleImageUpload()`）
- ✅ 基本營養統計和目標對比
- ❌ 缺少基於訓練強度的智能建議
- ❌ 缺少食譜建議

**需要擴展**: 見下方「智能營養建議」

### 2.2 動作分析（基礎版已實現）

**當前狀態**:

- ✅ MediaPipe 姿態檢測（`usePoseDetection.js`）
- ✅ 動作評分計算（`StrengthAnalysisView.jsx` - `calculateStrengthScore()`）
- ✅ AI 反饋生成（`performAIAnalysis()`）
- ❌ 缺少動作糾正建議
- ❌ 缺少標準動作對比

**需要擴展**: 見下方「動作糾正助手」

## 三、未實現功能（按優先級排序）

### 高優先級：AI 功能增強

#### 3.1 智能營養建議 ⭐⭐⭐

**功能描述**:

- 基於今日訓練強度和時間，推薦飲食計劃
- 分析營養攝入與訓練目標的匹配度
- 提供食譜建議和營養缺口提醒

**實現要點**:

- 擴展 `src/services/ai/nutritionService.js` 或創建 `src/services/ai/nutritionRecommendation.js`
- 整合訓練資料（從 `calendarService.js` 獲取今日訓練）
- 在 `NutritionView.jsx` 添加智能建議卡片
- 使用 Gemini API 生成個人化營養建議

**預期收益**: 提升營養功能價值，形成訓練-營養閉環

---

#### 3.2 動作糾正助手 ⭐⭐⭐

**功能描述**:

- 即時分析動作影片，提供具體糾正建議
- 對比標準動作，指出偏差角度和位置
- 生成糾正訓練計劃

**實現要點**:

- 增強 `src/services/analysisService.js` 或創建 `src/services/ai/formCorrection.js`
- 擴展 MediaPipe 分析功能，計算關鍵角度偏差
- 在 `StrengthAnalysisView.jsx` 中添加即時糾正提示
- 使用 Gemini API 生成具體糾正建議和訓練計劃

**預期收益**: 提升動作分析功能的實用性，幫助用戶改善動作品質

---

### 中優先級：資料管理與分享

#### 3.3 訓練日誌分享 ⭐⭐

**功能描述**:

- 用戶可以分享訓練日誌（圖片、資料）
- 生成訓練報告 PDF
- 匯出訓練資料（JSON/CSV）

**實現要點**:

- 創建 `src/utils/reportGenerator.js` 生成報告
- 添加分享功能（複製連結、生成圖片）
- 使用 jsPDF 或類似庫生成 PDF（需安裝依賴）
- 在 `CalendarView.jsx` 或 `DashboardView.jsx` 添加分享按鈕

**預期收益**: 滿足用戶分享需求，增加傳播

---

#### 3.4 資料備份與恢復 ⭐⭐

**功能描述**:

- 一鍵匯出所有資料（JSON 格式）
- 支援資料恢復
- 定期提醒備份

**實現要點**:

- 創建 `src/services/backupService.js`
- 在 `FeatureViews.jsx` (Profile 頁面) 添加備份/恢復功能
- 使用 Firebase Storage 儲存備份（可選）
- 或使用瀏覽器下載 JSON 檔案

**預期收益**: 保護用戶資料安全

---

### 低優先級：平台整合與移動端

#### 3.5 多平台資料同步 ⭐

**功能描述**:

- 支援匯入 Strava、Garmin Connect、Apple Health 資料
- 自動同步跑步資料
- 統一資料格式

**實現要點**:

- 創建 `src/services/import/platformSync.js`
- 支援各平台 API（如 Strava API）
- 添加同步設定頁面
- 需要申請各平台 API 權限

**預期收益**: 提高資料匯入便利性

---

#### 3.6 PWA 支援 ⭐

**功能描述**:

- 將應用改造為 PWA（Progressive Web App）
- 支援離線使用
- 添加到主螢幕

**實現要點**:

- 添加 `public/manifest.json`
- 註冊 Service Worker（`public/sw.js`）
- 實現離線快取策略
- 更新 `index.html` 引用 manifest

**預期收益**: 提升移動端體驗，增加用戶使用頻率

---

#### 3.7 響應式設計優化 ⭐

**功能描述**:

- 優化移動端佈局
- 改進觸摸交互
- 適配小螢幕顯示

**實現要點**:

- 使用 Tailwind 響應式類優化佈局
- 測試各頁面在移動端的顯示效果
- 優化表單輸入體驗

**預期收益**: 提升移動端用戶體驗

---

## 四、技術債務與優化

### 已完成優化 ✅

- ✅ 統一錯誤處理機制（`errorService.js`）
- ✅ CalendarView 重構（AI 生成邏輯已抽離到 `workoutGenerator.js`，WeeklyModal 已拆分）
- ✅ 資料快取策略（`calendarService.js` 已實現快取）
- ✅ 狀態管理優化（zustand 已集成）
- ✅ 代碼分割優化（MediaPipe 延遲加載）
- ✅ 加載狀態優化（Skeleton 組件已創建）
- ✅ 表單驗證增強（`formValidation.js` 已創建）

### 待改進項目

- [ ] 添加單元測試（Jest + React Testing Library）
- [ ] 添加 E2E 測試（Playwright 或 Cypress）
- [ ] 完善 README.md 文檔
- [ ] TypeScript 遷移（可選）
- [ ] 性能監控和錯誤追蹤（Sentry）
- [ ] CI/CD 流程完善

---

## 五、實施建議

### 立即實施（本週）

1. **智能營養建議** - 擴展營養功能，整合訓練資料
2. **動作糾正助手** - 增強動作分析，提供具體糾正建議

### 近期實施（下週）

3. **訓練日誌分享** - 添加 PDF 報告和分享功能
4. **資料備份與恢復** - 保護用戶資料

### 長期規劃（下個月）

5. **多平台資料同步** - 需要申請 API 權限
6. **PWA 支援** - 提升移動端體驗
7. **響應式設計優化** - 持續改進